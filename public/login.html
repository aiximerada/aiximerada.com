<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç³»çµ±ç™»å…¥ - ç‰éœ²å¯¶åº«</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg-gradient: linear-gradient(135deg, #0b1021 0%, #1a2c4e 100%);
            --suisei-cyan: #3bc6e4;
            --glass: rgba(255, 255, 255, 0.05);
        }
        body {
            font-family: 'Microsoft JhengHei', sans-serif;
            background: var(--bg-gradient);
            color: #fff;
            height: 100vh;
            display: flex; align-items: center; justify-content: center;
            margin: 0; overflow: hidden;
        }
        .stars-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; background-image: radial-gradient(2px 2px at 20px 30px, #fff, rgba(0,0,0,0)), radial-gradient(2px 2px at 40px 70px, #fff, rgba(0,0,0,0)); background-size: 200px 200px; opacity: 0.2; z-index: -1; }

        .login-card {
            background: var(--glass); backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 40px; border-radius: 20px; width: 300px; text-align: center;
            box-shadow: 0 15px 35px rgba(0,0,0,0.5);
        }
        .login-card h2 { margin-bottom: 30px; color: var(--suisei-cyan); text-shadow: 0 0 10px rgba(59, 198, 228, 0.5); }
        
        .input-group { margin-bottom: 20px; position: relative; }
        .input-group i { position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: #aaa; }
        .input-group input {
            width: 100%; padding: 12px 12px 12px 40px;
            background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1);
            border-radius: 50px; color: #fff; outline: none; box-sizing: border-box; transition: 0.3s;
        }
        .input-group input:focus { border-color: var(--suisei-cyan); box-shadow: 0 0 10px rgba(59, 198, 228, 0.3); }

        .login-btn {
            width: 100%; padding: 12px; border-radius: 50px; border: none;
            background: linear-gradient(90deg, var(--suisei-cyan), #0072ff);
            color: #fff; font-weight: bold; cursor: pointer; transition: 0.3s; margin-top: 10px;
        }
        .login-btn:hover { transform: scale(1.05); box-shadow: 0 0 20px rgba(59, 198, 228, 0.6); }
        .login-btn:disabled { background: #555; cursor: not-allowed; transform: none; box-shadow: none; }
        
        .back-link { display: block; margin-top: 20px; color: #888; text-decoration: none; font-size: 0.9rem; }
        .back-link:hover { color: #fff; }
        .error-msg { color: #ff4757; font-size: 0.85rem; margin-top: 10px; min-height: 20px; }
    </style>
</head>
<body>
    <div class="stars-bg"></div>

    <div class="login-card">
        <h2><i class="fa-solid fa-user-astronaut"></i> é›²ç«¯é©—è­‰</h2>
        <div class="input-group">
            <i class="fa-solid fa-envelope"></i>
            <input type="email" id="email" placeholder="ç®¡ç†å“¡ä¿¡ç®±">
        </div>
        <div class="input-group">
            <i class="fa-solid fa-lock"></i>
            <input type="password" id="password" placeholder="é€šè¡Œå¯†é‘°">
        </div>
        <button class="login-btn" id="loginBtn" onclick="handleLogin()">ç™»å…¥ç³»çµ±</button>
        <div class="error-msg" id="errorMsg"></div>
        <a href="index.html" class="back-link">è¿”å›é¦–é </a>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        // ğŸ”¥ è¨­å®šå€ (å·²å¡«å…¥æ‚¨çš„è³‡è¨Š)
        const firebaseConfig = {
            apiKey: "AIzaSyAAo6on0f2QUbPaRfxpIEb2uvhKxDvPUvs",
            authDomain: "yulubox.firebaseapp.com",
            projectId: "yulubox",
            storageBucket: "yulubox.firebasestorage.app",
            messagingSenderId: "256466567852",
            appId: "1:256466567852:web:233b74668908ffcb9b9509",
            measurementId: "G-YPCY41EKWX"
        };

        // åˆå§‹åŒ– Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // æš´éœ²çµ¦ HTML æŒ‰éˆ•å‘¼å«
        window.handleLogin = async function() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const btn = document.getElementById('loginBtn');
            const errorMsg = document.getElementById('errorMsg');

            if(!email || !password) {
                errorMsg.innerText = "è«‹è¼¸å…¥å®Œæ•´çš„å¸³è™Ÿå¯†ç¢¼";
                return;
            }

            btn.disabled = true;
            btn.innerHTML = '<i class="fa-solid fa-circle-notch fa-spin"></i> é©—è­‰ä¸­...';
            errorMsg.innerText = "";

            try {
                // å‘ Firebase ç™¼é€ç™»å…¥è«‹æ±‚
                await signInWithEmailAndPassword(auth, email, password);
                
                // ç™»å…¥æˆåŠŸ
                btn.innerHTML = '<i class="fa-solid fa-check"></i> é©—è­‰é€šé';
                btn.style.background = '#00ff9d';
                setTimeout(() => {
                    window.location.href = 'vip_area.html';
                }, 1000);

            } catch (error) {
                // ç™»å…¥å¤±æ•—è™•ç†
                console.error(error);
                btn.disabled = false;
                btn.innerHTML = 'ç™»å…¥ç³»çµ±';
                
                if(error.code === 'auth/invalid-credential' || error.code === 'auth/wrong-password' || error.code === 'auth/user-not-found') {
                    errorMsg.innerText = "å¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤";
                } else if (error.code === 'auth/too-many-requests') {
                    errorMsg.innerText = "å˜—è©¦æ¬¡æ•¸éå¤šï¼Œè«‹ç¨å¾Œå†è©¦";
                } else {
                    errorMsg.innerText = "ç™»å…¥å¤±æ•—: " + error.message;
                }
            }
        }
        
        document.addEventListener('keydown', (e) => { if(e.key === 'Enter') handleLogin(); });
    </script>
</body>
</html>